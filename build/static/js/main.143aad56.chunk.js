(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),u=t.n(c),r=t(15),a=t.n(r),o=(t(20),t(6)),i=t(3),l=t(0),s=function(e){var n=e.updateFilterText,t=e.filterText;return Object(l.jsxs)("div",{children:["filter shown with: ",Object(l.jsx)("input",{onChange:n,value:t})]})},d=function(e){var n=e.handleAdd,t=e.updateNewName,c=e.newName,u=e.updateNewNumber,r=e.newNumber;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{onChange:t,value:c})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{onChange:u,value:r})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.persons,t=e.handleDelete,c=e.filterText;return Object(l.jsx)("div",{children:""!==c?n.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())})).map((function(e){return Object(l.jsxs)("p",{children:[e.name," ",e.number," ",Object(l.jsx)("button",{onClick:function(n){return t(n,e.id,e.name)},children:"delete"})]},e.name)})):n.map((function(e){return Object(l.jsxs)("p",{children:[e.name," ",e.number," ",Object(l.jsx)("button",{onClick:function(n){return t(n,e.id,e.name)},children:"delete"})]},e.name)}))})},j=function(e){var n=e.message,t=e.status;return null===n||null===t?null:Object(l.jsx)("div",{className:t,children:n})},b=t(4),h=t.n(b),m="/api/persons",O=function(){return h.a.get(m).then((function(e){return e.data}))},p=function(e){return h.a.post(m,e).then((function(e){return e.data}))},x=function(e){return h.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},v=function(e,n){return h.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},w=function(){var e=Object(c.useState)(""),n=Object(i.a)(e,2),t=n[0],u=n[1],r=Object(c.useState)([]),a=Object(i.a)(r,2),b=a[0],h=a[1],m=Object(c.useState)(""),w=Object(i.a)(m,2),g=w[0],N=w[1],T=Object(c.useState)(""),C=Object(i.a)(T,2),S=C[0],k=C[1],y=Object(c.useState)(null),D=Object(i.a)(y,2),F=D[0],L=D[1],A=Object(c.useState)(null),E=Object(i.a)(A,2),P=E[0],B=E[1];Object(c.useEffect)((function(){console.log("effect"),O().then((function(e){h(e)}))}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(s,{updateFilterText:function(e){u(e.target.value)},filterText:t}),Object(l.jsx)("h3",{children:"Add a new contact"}),Object(l.jsx)(d,{handleAdd:function(e){e.preventDefault();var n={name:g,number:S},t=b.find((function(e){return e.name===g}));if(void 0===t)p(n).then((function(e){console.log(e),L("'".concat(g,"' was added")),B("success"),setTimeout((function(){L(null),B(null)}),5e3),h(b.concat(e))})).catch((function(e){var n=e.response.data.error;L("Error occurred: '".concat(n,"'")),B("error"),setTimeout((function(){L(null),B(null)}),5e3)}));else{var c=Object(o.a)(Object(o.a)({},t),{},{number:S});window.confirm("".concat(t.name," is already added to phonebook, replace number with new one?"))&&v(t.id,c).then((function(e){console.log(e),L("'".concat(e.name,"' number was updated")),B("success"),setTimeout((function(){L(null),B(null)}),5e3),h(b.map((function(n){return n.id!==t.id?n:e})))})).catch((function(e){L("'".concat(t.name,"' has been deleted from server")),B("error"),setTimeout((function(){L(null),B(null)}),5e3),h(b.filter((function(e){return e.id!==t.id})))}))}N(""),k("")},updateNewName:function(e){N(e.target.value)},newName:g,updateNewNumber:function(e){k(e.target.value)},newNumber:S}),Object(l.jsx)(j,{message:F,status:P}),Object(l.jsx)("h3",{children:"Names and numbers"}),Object(l.jsx)(f,{persons:b,handleDelete:function(e,n,t){e.preventDefault(),window.confirm("Do you really want to delete contact: ".concat(t,"?"))&&x(n).then((function(e){console.log(e),L("'".concat(t,"' was deleted")),B("success"),setTimeout((function(){L(null),B(null)}),5e3),h(b.filter((function(e){return e.id!==n})))})).catch((function(e){L("'".concat(t,"' has already been deleted from server")),B("error"),setTimeout((function(){L(null),B(null)}),5e3),h(b.filter((function(e){return e.id!==n})))}))},filterText:t})]})},g=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,c=n.getFID,u=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),c(e),u(e),r(e),a(e)}))};a.a.render(Object(l.jsx)(u.a.StrictMode,{children:Object(l.jsx)(w,{})}),document.getElementById("root")),g()}},[[40,1,2]]]);
//# sourceMappingURL=main.143aad56.chunk.js.map