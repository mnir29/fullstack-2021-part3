(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(1),u=n.n(c),r=n(15),a=n.n(r),o=(n(20),n(6)),i=n(3),l=n(0),s=function(e){var t=e.updateFilterText,n=e.filterText;return Object(l.jsxs)("div",{children:["filter shown with: ",Object(l.jsx)("input",{onChange:t,value:n})]})},d=function(e){var t=e.handleAdd,n=e.updateNewName,c=e.newName,u=e.updateNewNumber,r=e.newNumber;return Object(l.jsxs)("form",{onSubmit:t,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{onChange:n,value:c})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{onChange:u,value:r})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var t=e.persons,n=e.handleDelete,c=e.filterText;return Object(l.jsx)("div",{children:""!==c?t.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())})).map((function(e){return Object(l.jsxs)("p",{children:[e.name," ",e.number," ",Object(l.jsx)("button",{onClick:function(t){return n(t,e.id,e.name)},children:"delete"})]},e.name)})):t.map((function(e){return Object(l.jsxs)("p",{children:[e.name," ",e.number," ",Object(l.jsx)("button",{onClick:function(t){return n(t,e.id,e.name)},children:"delete"})]},e.name)}))})},j=function(e){var t=e.message,n=e.status;return null===t||null===n?null:Object(l.jsx)("div",{className:n,children:t})},b=n(4),h=n.n(b),m="/api/persons",O=function(){return h.a.get(m).then((function(e){return e.data}))},p=function(e){return h.a.post(m,e).then((function(e){return e.data}))},x=function(e){return h.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},v=function(e,t){return h.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},w=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],u=t[1],r=Object(c.useState)([]),a=Object(i.a)(r,2),b=a[0],h=a[1],m=Object(c.useState)(""),w=Object(i.a)(m,2),g=w[0],N=w[1],T=Object(c.useState)(""),C=Object(i.a)(T,2),S=C[0],k=C[1],y=Object(c.useState)(null),D=Object(i.a)(y,2),F=D[0],L=D[1],A=Object(c.useState)(null),P=Object(i.a)(A,2),B=P[0],E=P[1];Object(c.useEffect)((function(){console.log("effect"),O().then((function(e){h(e)}))}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(s,{updateFilterText:function(e){u(e.target.value)},filterText:n}),Object(l.jsx)("h3",{children:"Add a new contact"}),Object(l.jsx)(d,{handleAdd:function(e){e.preventDefault();var t={name:g,number:S},n=b.find((function(e){return e.name===g}));if(void 0===n)p(t).then((function(e){console.log(e),L("'".concat(g,"' was added")),E("success"),setTimeout((function(){L(null),E(null)}),5e3),h(b.concat(e))}));else{var c=Object(o.a)(Object(o.a)({},n),{},{number:S});window.confirm("".concat(n.name," is already added to phonebook, replace number with new one?"))&&v(n.id,c).then((function(e){console.log(e),L("'".concat(e.name,"' number was updated")),E("success"),setTimeout((function(){L(null),E(null)}),5e3),h(b.map((function(t){return t.id!==n.id?t:e})))})).catch((function(e){L("'".concat(n.name,"' has been deleted from server")),E("error"),setTimeout((function(){L(null),E(null)}),5e3),h(b.filter((function(e){return e.id!==n.id})))}))}N(""),k("")},updateNewName:function(e){N(e.target.value)},newName:g,updateNewNumber:function(e){k(e.target.value)},newNumber:S}),Object(l.jsx)(j,{message:F,status:B}),Object(l.jsx)("h3",{children:"Names and numbers"}),Object(l.jsx)(f,{persons:b,handleDelete:function(e,t,n){e.preventDefault(),window.confirm("Do you really want to delete contact: ".concat(n,"?"))&&x(t).then((function(e){console.log(e),L("'".concat(n,"' was deleted")),E("success"),setTimeout((function(){L(null),E(null)}),5e3),h(b.filter((function(e){return e.id!==t})))})).catch((function(e){L("'".concat(n,"' has already been deleted from server")),E("error"),setTimeout((function(){L(null),E(null)}),5e3),h(b.filter((function(e){return e.id!==t})))}))},filterText:n})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,c=t.getFID,u=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),u(e),r(e),a(e)}))};a.a.render(Object(l.jsx)(u.a.StrictMode,{children:Object(l.jsx)(w,{})}),document.getElementById("root")),g()}},[[40,1,2]]]);
//# sourceMappingURL=main.9934c0f6.chunk.js.map